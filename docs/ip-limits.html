<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<HTML
><HEAD
><TITLE
>Configuring IP-based Restrictions for Job Submission</TITLE
><META
NAME="GENERATOR"
CONTENT="Modular DocBook HTML Stylesheet Version 1.79"><LINK
REL="HOME"
TITLE="		Opal Toolkit Reference Guide
	"
HREF="index.html"><LINK
REL="UP"
TITLE="Appendix"
HREF="appendix.html"><LINK
REL="PREVIOUS"
TITLE="Configuring job limit for Fork Job Manager"
HREF="job-limits.html"><LINK
REL="NEXT"
TITLE="Configuring Email Notifications"
HREF="email-notifications.html"><LINK
REL="STYLESHEET"
TYPE="text/css"
HREF="rocks.css"></HEAD
><BODY
CLASS="SECTION"
BGCOLOR="#FFFFFF"
TEXT="#000000"
LINK="#0000FF"
VLINK="#840084"
ALINK="#0000FF"
><DIV
CLASS="NAVHEADER"
><TABLE
SUMMARY="Header navigation table"
WIDTH="100%"
BORDER="0"
CELLPADDING="0"
CELLSPACING="0"
><TR
><TH
COLSPAN="3"
ALIGN="center"
>Opal Toolkit Reference Guide:          </TH
></TR
><TR
><TD
WIDTH="10%"
ALIGN="left"
VALIGN="bottom"
><A
HREF="job-limits.html"
ACCESSKEY="P"
>Prev</A
></TD
><TD
WIDTH="80%"
ALIGN="center"
VALIGN="bottom"
>Chapter 8. Appendix</TD
><TD
WIDTH="10%"
ALIGN="right"
VALIGN="bottom"
><A
HREF="email-notifications.html"
ACCESSKEY="N"
>Next</A
></TD
></TR
></TABLE
><HR
ALIGN="LEFT"
WIDTH="100%"></DIV
><DIV
CLASS="SECTION"
><H1
CLASS="SECTION"
><A
NAME="IP-LIMITS"
>8.4. Configuring IP-based Restrictions for Job Submission</A
></H1
><P
>Beginning with version 2.2, Opal provides basic support for
restricting number of job submissions per IP. Appropriate properties for configuring this functionality
are set in the <STRONG
>etc/opal.properties</STRONG
> file: 
<P
></P
><UL
><LI
><P
>  Set <STRONG
>opal.ip.processing</STRONG
> to 
  <STRONG
>true</STRONG
>. 
  By default, the IP-based restrictions are turned off. 
  </P
></LI
><LI
><P
>  Use <STRONG
>opal.ip.limit</STRONG
>
  to configure the number of jobs that are allowed per IP address per hour. 
  If the Opal server receives more than these many jobs from any IP address
  per hour, it will reject job submissions by throwning an appropriate
  exception. 
  </P
></LI
><LI
><P
>  Use <STRONG
>opal.ip.blacklist</STRONG
> to
  block all jobs from a particular IP address.
  Note that the blacklist takes precedence over the whitelist - i.e.
  if an IP address is present on the blacklist, all jobs from this address
  will be blocked even if it is present in the whitelist. 
  </P
></LI
><LI
><P
>  Use <STRONG
>opal.ip.whitelist</STRONG
>
  to allow all jobs from a particular IP address. 
  Note that you should add localhost (127.0.0.1) to the whitelist, if you want 
  the Opal Dashboard to be able to submit jobs always.
  </P
></LI
></UL
>
An example configuration for IP-based restrictions feature:</P
><TABLE
BORDER="0"
BGCOLOR="#E0E0E0"
WIDTH="100%"
><TR
><TD
><FONT
COLOR="#000000"
><PRE
CLASS="SCREEN"
>## BEGIN: information for the per IP limits on job submission
## ----------------------------------------------------------
# boolean switch to turn processing on or off
opal.ip.processing=true

# number of jobs per IP per hour
opal.ip.limit=10

# block all jobs from this IP - comma separated entries (optional)
opal.ip.blacklist=66.102.7.104, 137.223.43.127

# always allow jobs from this IP - comma separated entries (optional)
opal.ip.whitelist=66.102.7.105, 127.0.0.1
## ----------------------------------------------------------
## END: information for the per IP limits on job submission</PRE
></FONT
></TD
></TR
></TABLE
><P
>After editing <STRONG
>etc/opal.properties</STRONG
> reinstall Opal
using the <STRONG
>ant install</STRONG
> command, and restart Tomcat for
the changes to take effect.</P
></DIV
><DIV
CLASS="NAVFOOTER"
><HR
ALIGN="LEFT"
WIDTH="100%"><TABLE
SUMMARY="Footer navigation table"
WIDTH="100%"
BORDER="0"
CELLPADDING="0"
CELLSPACING="0"
><TR
><TD
WIDTH="33%"
ALIGN="left"
VALIGN="top"
><A
HREF="job-limits.html"
ACCESSKEY="P"
>Prev</A
></TD
><TD
WIDTH="34%"
ALIGN="center"
VALIGN="top"
><A
HREF="index.html"
ACCESSKEY="H"
>Home</A
></TD
><TD
WIDTH="33%"
ALIGN="right"
VALIGN="top"
><A
HREF="email-notifications.html"
ACCESSKEY="N"
>Next</A
></TD
></TR
><TR
><TD
WIDTH="33%"
ALIGN="left"
VALIGN="top"
>Configuring job limit for Fork Job Manager</TD
><TD
WIDTH="34%"
ALIGN="center"
VALIGN="top"
><A
HREF="appendix.html"
ACCESSKEY="U"
>Up</A
></TD
><TD
WIDTH="33%"
ALIGN="right"
VALIGN="top"
>Configuring Email Notifications</TD
></TR
></TABLE
></DIV
></BODY
></HTML
>
