<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<HTML
><HEAD
><TITLE
>Using DRMAA</TITLE
><META
NAME="GENERATOR"
CONTENT="Modular DocBook HTML Stylesheet Version 1.79"><LINK
REL="HOME"
TITLE="		Opal Toolkit Reference Guide
	"
HREF="index.html"><LINK
REL="UP"
TITLE="Scheduler Support Using Job Managers"
HREF="scheduler.html"><LINK
REL="PREVIOUS"
TITLE="Scheduler Support Using Job Managers"
HREF="scheduler.html"><LINK
REL="NEXT"
TITLE="Using Condor"
HREF="condor-scheduler.html"><LINK
REL="STYLESHEET"
TYPE="text/css"
HREF="rocks.css"></HEAD
><BODY
CLASS="SECTION"
BGCOLOR="#FFFFFF"
TEXT="#000000"
LINK="#0000FF"
VLINK="#840084"
ALINK="#0000FF"
><DIV
CLASS="NAVHEADER"
><TABLE
SUMMARY="Header navigation table"
WIDTH="100%"
BORDER="0"
CELLPADDING="0"
CELLSPACING="0"
><TR
><TH
COLSPAN="3"
ALIGN="center"
>Opal Toolkit Reference Guide:          </TH
></TR
><TR
><TD
WIDTH="10%"
ALIGN="left"
VALIGN="bottom"
><A
HREF="scheduler.html"
ACCESSKEY="P"
>Prev</A
></TD
><TD
WIDTH="80%"
ALIGN="center"
VALIGN="bottom"
>Chapter 5. Scheduler Support Using Job Managers</TD
><TD
WIDTH="10%"
ALIGN="right"
VALIGN="bottom"
><A
HREF="condor-scheduler.html"
ACCESSKEY="N"
>Next</A
></TD
></TR
></TABLE
><HR
ALIGN="LEFT"
WIDTH="100%"></DIV
><DIV
CLASS="SECTION"
><H1
CLASS="SECTION"
><A
NAME="DRMAA-SCHEDULER"
>5.1. Using DRMAA</A
></H1
><P
> We have only tested job submissions for SGE 6.x.</P
><P
></P
><OL
TYPE="1"
><LI
><P
>Ensure that your scheduler supports job submission via the DRMAA API, consult your scheduelr documentation.
Ensure that <EM
>libdrmaa.so</EM
> is in your library path (set
 the LD_LIBRARY_PATH environment variable). </P
></LI
><LI
><P
>Set the following properties inside the opal.properties file:</P
><P
></P
><UL
><LI
><P
>      Set job manager to SGE
      <TABLE
BORDER="0"
BGCOLOR="#E0E0E0"
WIDTH="90%"
><TR
><TD
><FONT
COLOR="#000000"
><PRE
CLASS="SCREEN"
>  opal.jobmanager=edu.sdsc.nbcr.opal.manager.DRMAAJobManager</PRE
></FONT
></TD
></TR
></TABLE
>
    </P
></LI
><LI
><P
>      Optional: set the  name of the parallel environment (PE) to be used for parallel jobs. 
      PE must be defined in your scheduelr queue. 
      You can ignore drmaa.pe if you do not plan on supporting parallel jobs. 
      <TABLE
BORDER="0"
BGCOLOR="#E0E0E0"
WIDTH="90%"
><TR
><TD
><FONT
COLOR="#000000"
><PRE
CLASS="SCREEN"
>  drmaa.pe=mpich</PRE
></FONT
></TD
></TR
></TABLE
>
    </P
></LI
><LI
><P
>      Optional: set an SGE queue for job submission.
      <TABLE
BORDER="0"
BGCOLOR="#E0E0E0"
WIDTH="90%"
><TR
><TD
><FONT
COLOR="#000000"
><PRE
CLASS="SCREEN"
>  drmaa.queue=all.q</PRE
></FONT
></TD
></TR
></TABLE
>
    </P
></LI
></UL
><P
>Note that the <TT
CLASS="FILENAME"
>drmaa.pe</TT
> and the
  <TT
CLASS="FILENAME"
>drmaa.queue</TT
> can be overridden on a per-application basis within 
  the application configuration file, for example:
  <TABLE
BORDER="0"
BGCOLOR="#E0E0E0"
WIDTH="90%"
><TR
><TD
><FONT
COLOR="#000000"
><PRE
CLASS="SCREEN"
>   &#60;appConfig xmlns="http://nbcr.sdsc.edu/opal/types"
       xmlns:xsd="http://www.w3.org/2001/XMLSchema"&#62;
     &#60;metadata appName=...
         ...
     &#60;/metadata&#62;
     &#60;drmaaQueue&#62;si&#60;/drmaaQueue&#62;
     &#60;drmaaPE&#62;orte&#60;/drmaaPE&#62;
     &#60;parallel&#62;true&#60;/parallel&#62;
   &#60;/appConfig&#62;
  </PRE
></FONT
></TD
></TR
></TABLE
>

  </P
></LI
><LI
><P
>Reinstall Opal by running the following command:
<TABLE
BORDER="0"
BGCOLOR="#E0E0E0"
WIDTH="90%"
><TR
><TD
><FONT
COLOR="#000000"
><PRE
CLASS="SCREEN"
>    ant install</PRE
></FONT
></TD
></TR
></TABLE
></P
></LI
><LI
><P
>Restart Tomcat for the changes to take effect.</P
></LI
><LI
><P
>Notes:</P
><P
></P
><UL
><LI
><P
>      When using DRMAA job manager we do not stage input and output files from the Opal server to the submit host.
      The machines should use a shared file system for the job manager to work correctly.
    </P
></LI
><LI
><P
>      DRMAA support will not work correctly if you have another version of the drmaa.jar inside 
      Tomcat's <EM
>common/lib</EM
> or <EM
>server/lib</EM
> 
      directories, since these vers ions will be loaded first by Tomcat's class loader.
    </P
></LI
></UL
></LI
></OL
></DIV
><DIV
CLASS="NAVFOOTER"
><HR
ALIGN="LEFT"
WIDTH="100%"><TABLE
SUMMARY="Footer navigation table"
WIDTH="100%"
BORDER="0"
CELLPADDING="0"
CELLSPACING="0"
><TR
><TD
WIDTH="33%"
ALIGN="left"
VALIGN="top"
><A
HREF="scheduler.html"
ACCESSKEY="P"
>Prev</A
></TD
><TD
WIDTH="34%"
ALIGN="center"
VALIGN="top"
><A
HREF="index.html"
ACCESSKEY="H"
>Home</A
></TD
><TD
WIDTH="33%"
ALIGN="right"
VALIGN="top"
><A
HREF="condor-scheduler.html"
ACCESSKEY="N"
>Next</A
></TD
></TR
><TR
><TD
WIDTH="33%"
ALIGN="left"
VALIGN="top"
>Scheduler Support Using Job Managers</TD
><TD
WIDTH="34%"
ALIGN="center"
VALIGN="top"
><A
HREF="scheduler.html"
ACCESSKEY="U"
>Up</A
></TD
><TD
WIDTH="33%"
ALIGN="right"
VALIGN="top"
>Using Condor</TD
></TR
></TABLE
></DIV
></BODY
></HTML
>
